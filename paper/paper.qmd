---
title: "Assessing Toronto's Shelter System: Availability, Utilization, and Urgent Capacity Needs"
author: 
  - Diana Shen
thanks: "Code and data are available at: https://github.com/DianaShen1224/Donaldson-Paper.git"
date: today
date-format: long
abstract: "This paper investigates the effectiveness of shelters in Toronto using data from the 'Daily Shelter & Overnight Service Occupancy & Capacity' dataset. Our findings show that while shelters are well-utilized with high occupancy rates, there is a significant shortage of long-term transitional shelters, crucial for helping individuals reintegrate into society. This gap is partly attributed to a cumbersome application process, leading to low demand despite the ongoing need. Approximately 78% of shelters are concentrated in Toronto, and areas like North York face significant demand relative to their supply, indicating a critical shortage of accessible facilities.  Additionally, discrepancies in occupancy rates, particularly among youth shelters, highlight the need for improved accessibility and awareness for vulnerable populations."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false
#### Workspace setup ####
library(tidyverse)
library(knitr)
library(modelsummary)
```

```{r}
#| include: false
#| warning: false
#| message: false
#### Load Clean data ####
cleaned_data <- read_csv("~/Donaldson Paper/data/analysis_data/analysis_data.csv")
```

# 1. Introduction {#first-intro}

Toronto has the largest homeless population in Canada, with over 10,000 individuals experiencing homelessness each night. The causes of homelessness are varied and complex, including unemployment, family breakdown, domestic violence, mental health challenges, poor physical health, substance abuse, and physical, sexual, or emotional abuse, among other factors. (@web1) In May 2023, the Toronto City Council officially declared a state of emergency on homelessness, recognizing a crisis that has persisted for decades. The City of Toronto's Shelter, Support & Housing Administration works in collaboration with community agencies to provide housing and homelessness services through funding support and service coordination. (@research) As of October 2023, Toronto was home to approximately 10,700 individuals experiencing homelessness, with about 9,000 utilizing the shelter system and 1,700 living outdoors.

Given the scale of homelessness in Toronto, it is essential to assess how effectively the city's shelter system is addressing this need. Many individuals experiencing homelessness face barriers to accessing information and services, making the availability of shelters a critical indicator of the system's effectiveness. Therefore, our paper utilizes data from 2023 from the Support Services division's Shelter Management Information System (SMIS) to examine the effectiveness of Toronto’s shelters. The paper uses shelter occupancy rates and service user counts as key availability indicators, exploring whether the government-funded shelters have been fully used to fill this knowledge gap.

To do this, the daily list of active overnight shelter and allied services from the Toronto Shelter and SMIS database was obtained from Toronto Open Data, as described in Section [2.1](#sec1-data). Based on this dataset(Section [2.2](#sec2-data)), it was found that shelters in GTA are highly concentrated, with about 78% located within the city, while North York has the second-highest concentration at only 9.9%.  We find out that though shelters are highly available, despite Toronto's downtown, other cities are still facing a shortage. Regarding shelter usage, mixed adult emergency shelters are the most frequently used, with a total of 1,071,686 counts in 2023. Usage drops dramatically in February and rises again in December. The occupancy rate is consistently at 100% for both emergency and transitional shelters, which shows highly efficient results. 

As discussed in Section [3](#third), We find out that though shelters are highly available, despite Toronto downtown, other cities are still facing a shortage(for NY only 9.9%). The whole year's usage is stable except for Feb and Dec fluctuations. Furthermore, occupancy trends highlight a unique issue within youth shelters, where peak occupancy remains around 50%, signaling potential service gaps for this vulnerable population. Additionally, transitional shelters face significant shortages, which are critical for helping individuals re-enter society. 
With respect to the structure of this paper, Section [2](#sec-data) provides an overview of the data and results, while Section [3](#third) includes a discussion of the findings; and Section [A](#appendix-a) includes supplementary information.

# Data {#sec-data}

## Overview {#sec1-data} 

The data used in this paper came from the OpenData Toronto portal through the library opendatatoronto (@opendatatoronto). The particular data set used to analyze the active overnight shelter and allied services in the Toronto Shelter
in the City of Toronto is Daily Shelter & Overnight Service Occupancy & Capacity (@web2). It provides daily updates on shelter and overnight service programs administered by TSSS, including program operator, location, classification, occupancy, and capacity. This data is refreshed daily and the particular data 
used in this paper is up-to-date as of December 31, 2023. In addition, this dataset is considered to be “open data”(@web2) and can be utilized for a variety of purposes as long as an attribution statement is attached (Section A.[1](#appendix-a.1)) and the link to the City of Toronto’s Open Data License is added (@web3).

There are 32 variables in the dataset. The full description and explanation of variables are shown in (Section [A.4](#appendix-a.4)). The variables or measurements that are used in this analysis are “Service User Count”, which refers to the count of the number of service users staying in an overnight program as of the occupancy time and date. ; “Shelter programs”(named "program_model" in the original dataset), which indicates whether the shelter program is either Emergency or Transitional(*Emergency*: A homeless shelter program that can be accessed by any individual or family experiencing homelessness with or without a referral. *Transitional*: A homeless shelter program that provides required, specialized programming and can be accessed by eligible individuals and families experiencing homelessness by referral only.); “shelter sectors” (named “sector” in the original dataset), which denotes means of categorizing homeless shelters based on the gender, age, and household size of the service user group(s) served at the shelter location (Section [A.4](#appendix-a.4); "occupancy rate bed", which indicates the proportion of actual bed capacity that is occupied for the reporting date; "occupancy rate rooms", which indicates the proportion of actual room capacity that is occupied for the reporting date (detailed calculation rules in Section [A.4](#appendix-a.4)). 

The other datasets that involving shelters are Deaths of Shelter Residents, Daily Shelter Occupancy, Toronto Shelter System Flow, and Fatal and non-fatal suspected opioid overdoses in the shelter system, which could be identified by searching the City of Toronto’s Open Data Catalogue @web4. Since this paper focuses on the effectiveness of shelters, not the people living in the shelter, this dataset was not used in this analysis. In addition, the daily shelter occupancy has been updated to Daily Shelter & Overnight Service Occupancy & Capacity since 2021, so this paper only uses the latest version. 

The data was cleaned and analyzed by using the open-source statistical programming language R (@rohan). This paper uses janitor (@janitor) and tidyverse (@tidyverse) packages to simulate the dataset and generate tests for it. The opendatatoronto (@opendatatoronto) and tidyverse (@tidyverse) packages were then applied to download the raw Toronto Public Health dataset. Next, the tidyverse (@tidyverse), lubricate (@lubridate), dplyr (@dplyr), tidyr (@tidyr), and janitor (@janitor) packages were used to clean the raw dataset and test the cleaned dataset. Then, the paper uses ggplot2 (@ggplot2) to draw graphs from data, use modelsummary (@modelsummary) to generate the summary table, use knitr (@knitr1,@knitr2,@knitr3) to generate the table in Section [A.4](#appendix-a.4)). 

## Results {#sec2-data}

@tbl-sum1 illustrates the summary statistic of the categorical variables (not including ID and address variables). It shows that Toronto owns the majority of shelters, approximately 78%. The shelters are highly concentrated since the second high city North York takes only 9.9% of the shelters. The shelter sectors are approximately evenly distributed, with the highest sector mixed adults (29.8%). The emergency program shelter programs comprised a majority (81.3%). For the service type, shelter consists 65.5% of the total services, followed by motels (25.2%) and 24-Hour Respite Sites (6.1%).
Regular shelter (Base Shelter and Overnight Services System) comprised the majority (66.5%), followed by COVID-19 Response (20.6%). For the capacity type, bed-based is more common (68.8%), while for room-based is only 32%. \

@tbl-sum2 illustrates the summary statistic of the numerical variables (not including ID and address variables). It shows that the mean of actual beds in shelters is approximately 44, and for funding beds is 45.5. Thus, the mean of unavailable beds is 1.1. For room-based, it's 73 for funding rooms and 69 for actual rooms, and the unavailable rooms are 4.9. The occupancy rate for both rooms and beds is high (99.1% and 97.5%), thus the unoccupied beds and rooms are low (0.5 and 0.4). The mean service user count is approximately 68 counts per day. \

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| label: tbl-sum1
#| fig-cap: "Summary Statistics of Catogrical Variables in the dataset"
datasummary_skim(cleaned_data |>select(location_city,sector,program_model,overnight_service_type,program_area,capacity_type),type = "categorical",
                 )
```

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| label: tbl-sum2
#| fig-cap: "Summary Statistics of Numerical Variables in the dataset"
datasummary_skim(cleaned_data |>select(capacity_actual_bed,capacity_funding_bed,occupied_beds,unoccupied_beds,unavailable_beds,capacity_actual_room,capacity_funding_room,occupied_rooms,unoccupied_rooms,unavailable_rooms,occupancy_rate_beds,occupancy_rate_rooms,service_user_count),type = "numeric",fun_numeric = list(Mean = Mean, SD =
    SD, Min = Min, Median = Median, Max = Max, Histogram = function(x) ""),
                 )
```

@fig-bar1 shows the sum of the count of service users in each city for each shelter program of homeless shelters. It indicates that the emergency program shelters in Toronto have the highest number of times used. In 2023, they have been used for 1,869,153 times (56.84% of total user counts). Followed by the emergency program shelters in North York (615,366,18.71%). Only three cities have the transitional program, which are Toronto (329,046), Etobicoke (5279), and Scarborough (13,427).

```{r}
#| echo: false
#| eval: true
#| message: false
#| label: fig-bar1
#| fig-cap: "Count of service users in each city for each shelter program of homeless shelters."
#| warning: false 
cleaned_data |>
  group_by(location_city, program_model) |>
  summarize(total_user_count = sum(service_user_count), .groups = "drop")|>mutate(pct = prop.table(total_user_count)) |>
  ggplot(mapping = aes(x = location_city, y = total_user_count, fill = program_model))+
  geom_text(aes(label = scales::percent(pct, accuracy =.01)),position = position_dodge(width = .9), 
              vjust = -0.3, 
              size = 2.5) +
  geom_bar(stat = "identity", position = "dodge2") +
  labs(x = "shelter sectors", y = "Service User Count", fill = "Shelter Program") +theme_classic()+
  theme(legend.position = "bottom",
        axis.text.x = element_text(angle = 45, hjust = 1))
```
@fig-bar2 illustrates the number of shelters for each program sector by different shelter programs. The highest category is emergency Mixed Adults, with 1071686 counts of users. Followed by emergency Families (773,818), emergency Men (632,405), emergency Women (311,085), emergency Youth (151,759); transitional Families(108,815), Mixed Adult (70,805), Men (64,191), Women (38,873), Youth (65,068).
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| label: fig-bar2
#| fig-cap: "Service User Count for each sectors for each shelter program for funded shelters."
cleaned_data |>
  group_by(sector,program_model)|>
  summarize(total_user_count = sum(service_user_count), .groups = "drop") |> 
  ggplot(mapping = aes(x = sector,y=total_user_count,fill = program_model)) +
  geom_bar(stat = "identity") +
  geom_text(stat = "identity", aes(label =total_user_count ),size = 3)+theme_classic()+  
  labs(x = "shelter sectors", y = "Service User Count", fill = "Shelter Program") +
  theme(legend.position = "bottom",
        axis.text.x = element_text(angle = 45, hjust = 1))
```

In @fig-line1, the trend of service user counts by month reveals two notable fluctuations in 2023: a dramatic drop in February and a significant increase in December. As illustrated in @fig-line1-2, these changes are primarily driven by variations in the number of users of emergency program shelters, while the transitional programs show relatively stable usage throughout the year. 
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| label: fig-line1
#| fig-cap: "Count of service users in each city by month."
#| fig-subcap: ["Combined Shelter Programs","Seperated Shelter Programs"]
#| layout-ncol: 2
cleaned_data |> 
  group_by(month) |> 
  summarize(total_user_count = sum(service_user_count), .groups = "drop") |> 
  ggplot(mapping = aes(x = month, y = total_user_count, group = 1)) + 
  geom_line() +
  theme_classic() +
  labs(x = "Month", y = "Service User Count")
cleaned_data |> 
  group_by(month, program_model) |> 
  summarize(total_user_count = sum(service_user_count), .groups = "drop") |> 
  ggplot(mapping = aes(x = month, y = total_user_count, group = program_model, color = program_model)) + 
  geom_line() +
  theme_classic() +
  labs(x = "Month", y = "Service User Count", color= "Shelter Program") +
  scale_fill_viridis_d()
```

In @fig-hist1, the occupancy rates for various categories of homeless shelters are predominantly clustered around 100% for both bed-based and room-based shelters. However, the youth category in bed-based shelters shows a notable exception, with occupancy rates dropping to approximately 50%. It's important to note that the family sector does not include bed-based shelters, which is why there is no corresponding category for families in this data.\
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| label: fig-hist1
#| fig-cap: "Distribution of occupancy rate for each shelter sector."
#| fig-subcap: ["Bed-Based","Room-Based"]
#| layout-ncol: 2

cleaned_data |>
  ggplot(mapping = aes(x=occupancy_rate_beds,color= sector)) +
   geom_freqpoly(binwidth=10) +
  labs(x = "Occupancy Rate Beds", fill = "Shelter Sector")+
  xlim(0, 100)+theme_classic() +
  theme(legend.position = "bottom")+scale_color_brewer(palette = "Set1")

cleaned_data |>
  ggplot(mapping = aes(x=occupancy_rate_rooms,color= sector)) +
   geom_freqpoly(binwidth=10) +
  labs(x = "Occupancy Rate Rooms", fill = "Shelter Sector")+
  xlim(0, 100)+theme_classic() +
  theme(legend.position = "bottom")+scale_color_brewer(palette = "Set1")

```

In @fig-hist2, the histogram shows that occupancy rates for both emergency and transitional programs are primarily concentrated around 100% for both bed-based and room-based shelters.\

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| label: fig-hist2
#| fig-cap: "Distribution of occupancy rate in each Shelter Program."
#| fig-subcap: ["Bed-Based","Room-Based"]
#| layout-ncol: 2
cleaned_data |> 
  filter(!is.na(occupancy_rate_beds), !is.na(capacity_actual_bed),!is.na(program_model)) |>
ggplot(mapping = aes(x = occupancy_rate_beds, fill = program_model)) +
  geom_histogram(alpha = 0.5, position = "identity",binwidth = 2) +
  theme_minimal() +
  labs(
    x = "Occupancy Rate of Beds", y = "Number of occurrences",
    fill = "Program Model",
    caption = "Data source: Open Toronto Data."
  ) +theme_classic()+
  scale_color_brewer(palette = "Set1")

cleaned_data |> 
  filter(!is.na(occupancy_rate_rooms), !is.na(capacity_actual_room),!is.na(program_model)) |>
ggplot(mapping = aes(x = occupancy_rate_rooms, fill = program_model)) +
  geom_histogram(alpha = 0.5, position = "identity",binwidth = 2) +
  theme_minimal() +
  labs(
    x = "Occupancy Rate of Rooms", y = "Number of occurrences",
    fill = "Program Model",
    caption = "Data source: Open Toronto Data."
  )+theme_classic() +
  scale_color_brewer(palette = "Set1")


```


# Discussion{#third} 

## From User Service Count Aspect

Based on the dataset, it was found that shelters in the Greater Toronto Area (GTA) are highly concentrated, with approximately 78% located within the city of Toronto.  In comparison, North York has the second-highest concentration at only 9.9%.  However, as shown in @fig-bar1, North York shelters account for 18.71% of the total service user count, nearly double its proportion of shelters.  This suggests that despite the high number of shelters in the GTA, areas outside of downtown Toronto, such as North York, are still facing a shortage of shelters and experiencing significant capacity pressure. Regarding shelter usage, mixed adult emergency shelters are the most frequently utilized, with a total of 1,071,686 service counts in 2023, followed by emergency Families (773818), emergency Men (632405), emergency Women (311085), emergency Youth (151759);  transitional Families(108815), Mixed Adult (70805), Men (64191), Women (38873), Youth (65068). According to data from the City of Toronto(@web5), approximately 10,700 individuals are experiencing homelessness, which suggests that each adult can stay in a shelter for around 100 nights, on average.  Although we currently do not have specific data on the number of days individuals are allowed to stay in shelters, this estimate indicates that Toronto’s shelters have enough capacity to temporarily accommodate the homeless population effectively. Except for the dramatic drops in February and rises in December, the whole year's usage of shelters is mostly consistent.  @fig-line1 shows that these fluctuations are primarily driven by changes in the number of users of emergency program shelters, as there is no significant variation in the transitional programs. The exact cause of this dramatic change is still unclear;  it could be due to February having only 28 days, or there may have been specific events or circumstances in February and December that contributed to the shifts.\

## From the Occupancy Rate Aspect

The occupancy rate remains consistently high, close to 100%, across both shelter programs and shelter sectors.This indicates a high level of utilization across these programs, reflecting the ongoing demand for shelter services in the area, suggest that both emergency and transitional shelters are effectively meeting the needs of individuals experiencing homelessness (@fig-hist1,@fig-hist2). 

However, a notable exception is the Youth bed-based shelters, which exhibit a small peak at around 50% occupancy. This indicates that, on certain nights, only half of the available beds in youth shelters are occupied. This discrepancy raises important questions: What accounts for the difference in occupancy rates between Youth and Adult shelters? Is it simply that the homeless population among youth is significantly smaller than among adults? Or could it be that youth face a larger information gap regarding shelter availability compared to adults? Understanding the cause of this difference is urgent, as homeless youth are particularly vulnerable, and it is crucial to ensure that they are adequately protected and housed in shelters.

It is also notable that bed-based transitional shelters show a significant number of occupancy rates distributed below 90%, indicating that these shelters may not be fully utilized. This underutilization suggests that factors beyond capacity, such as access barriers, may be contributing to the incomplete use of transitional shelters. This observation raises important questions about the reasons behind this underuse, prompting a closer look at the specific challenges faced by transitional shelters.

## Insights into the Underutilization and Availability Challenges of Transitional Shelters

When we examine the service user counts and occupancy rates, it becomes clear that there are relatively few transitional shelters. From the perspective of city location (@fig-bar1), only three cities have transitional shelter programs: Toronto (329,046 users), Etobicoke (5,279 users), and Scarborough (13,427 users). Together, these cities account for only 10.67% of the total service user count, making transitional shelters a clear minority among shelter programs.

Looking at the shelter sectors (@fig-bar2), it is evident that the use of transitional shelters is far lower than that of emergency shelters. This raises an important question: why is this the case? A likely reason is that transitional shelters are only accessible to eligible individuals and families through a referral process. This creates barriers for people experiencing homelessness to access them. Consequently, the assessment and referral process contribute to the higher operational costs of transitional shelters compared to emergency shelters, leading to fewer transitional shelters being available.

However, as discussed in Section [1](#first-intro), the short stay provided by emergency shelters may not be sufficient to address the varied and complex causes of homelessness. Shelters often serve as the first step in helping people experiencing homelessness break the cycle—such as securing a stable address in order to find work. For this reason, long-term stays are often necessary. Unfortunately, the strict eligibility requirements and referral processes of transitional shelters may not adequately meet the needs of individuals seeking reintegration into society.

## Weaknesses and next steps

Since our dataset contains many NA values, and every observation has at least one missing value, the presence of these missing values compromises the dataset's integrity, making it challenging to draw reliable conclusions. Therefore, as the next step, we plan to track the dataset for at least 12 months to validate the robustness of our results.

\newpage

\appendix

# Appendix {#appendix-a}

## Dataset and Graph Sketches {#appendix-a.1}

Sketches depicting both the desired dataset and the graphs generated in this analysis are available in the GitHub Repository. 

## Data Cleaning {#appendix-a.2}

The data cleaning process involved separating dates into year, month, and day for clarity and simplicity. The data isn't filtered with the NA's value since every observation in the dataset contains at least one missing value in a variable. Removing these observations would result in the complete loss of data, making analysis impossible.

## Attribution Statement {#appendix-a.3}

"Contains information licensed under the Open Government Licence– Toronto" (@web3).

## variable description{#appendix-a.4}
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| label: tbl2
#| fig-cap: "Description of variables in the dataset"
data <- data.frame(
  column = c("id", "occupancy date", "organization id", "organization name", "shelter id", 
             "shelter group", "location id", "location name", "location address", 
             "location postal code", "location city", "location province", "program id", 
             "program name", "sector", "program model", "overnight service type", 
             "program area", "service user count", "capacity type", "capacity actual bed", 
             "capacity funding bed", "occupied beds", "unoccupied beds", "unavailable beds", 
             "capacity actual room", "capacity funding room", "occupied rooms", 
             "unoccupied rooms", "unavailable rooms", "occupancy rate beds", 
             "occupancy rate rooms"),
  
  description = c("Unique row identifier for Open Data database", 
                  "Date of the record. This date refers to the evening of the overnight period being reported. Data collected at 4:00 am the following morning.",
                  "Unique ID to consistently identify organizations even if the organization name changes",
                  "Name of the organization providing the overnight service",
                  "Unique ID to consistently identify the shelter group even if the shelter group name changes",
                  "The shelter group to which the program belongs in the SMIS database",
                  "Unique ID to consistently identify locations even if the location name changes",
                  "The name of the location of the program",
                  "Street address of the location of the program",
                  "Postal Code of the location of the program",
                  "City of the location of the program",
                  "Province of the location of the program",
                  "Unique ID to consistently identify programs even if the program name changes",
                  "Name of the program",
                  "Means of categorizing shelters by gender, age, household size of service users",
                  "Classification of shelter programs as either Emergency or Transitional",
                  "Identifies the type of overnight service being provided (Shelter, 24-Hour Respite, etc.)",
                  "Indicates whether the program is part of the base system or a temporary response program",
                  "Count of the number of service users staying overnight as of the occupancy date",
                  "Whether the capacity is measured in rooms or beds",
                  "Number of beds available for occupancy",
                  "Number of beds approved to provide",
                  "Number of beds occupied by a shelter user",
                  "Number of available beds not occupied as of the occupancy date",
                  "Number of beds unavailable due to maintenance, repairs, etc.",
                  "Number of rooms available for occupancy",
                  "Number of rooms approved to provide",
                  "Number of rooms occupied by a shelter user",
                  "Number of available rooms not occupied as of the occupancy date",
                  "Number of rooms unavailable due to maintenance, repairs, etc.",
                  "Proportion of actual bed capacity occupied",
                  "Proportion of actual room capacity occupied")
)
kable(data, caption = "Shelter Data Columns and Descriptions", align = "l")

```

\newpage

# References
